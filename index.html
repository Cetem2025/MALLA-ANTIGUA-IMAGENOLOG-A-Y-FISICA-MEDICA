<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva Tecnología Médica</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: #f4e8f3;
      padding: 20px;
      color: #333;
      margin: 0;
    }
    h1 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 30px;
      color: #996998;
      padding: 0 10px;
      text-transform: uppercase;
    }
    .year-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
      max-width: 1000px;
      margin: 0 auto;
    }
    .year {
      display: flex;
      flex-direction: row;
      gap: 20px;
      padding: 20px;
      border-radius: 12px;
      border-top: 5px solid #996998;
      background-color: #ffffff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      justify-content: center;
    }
    .year-title {
      writing-mode: vertical-rl;
      transform: rotate(180deg);
      font-size: 20px;
      font-weight: bold;
      margin-right: 10px;
      border-right: 2px solid #a473a3;
      padding-right: 8px;
      text-transform: uppercase;
      color: #996998;
    }
    .semester-container {
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    .semester {
      min-width: 200px;
      padding: 15px;
      background: #e8d1e7;
      border: 1px solid #a473a3;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    .semester-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 12px;
      text-align: center;
      color: #996998;
    }
    .course {
      padding: 8px 10px;
      margin: 6px 0;
      border-radius: 6px;
      cursor: pointer;
      background-color: #c493c3;
      color: white;
      transition: background-color 0.3s ease;
    }
    .course.approved {
      background-color: #996998;
      text-decoration: line-through;
    }
    .course.locked {
      background-color: #dcbadb;
      cursor: not-allowed;
      color: #555;
    }
    .year[data-color='celeste'],
    .year[data-color='morado'] {
      background-color: #ffffff;
    }
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      h1 {
        font-size: 20px;
      }
      .year {
        flex-direction: column;
      }
      .year-title {
        writing-mode: horizontal-tb;
        transform: none;
        margin-right: 0;
        margin-bottom: 10px;
        border-right: none;
        border-bottom: 2px solid #a473a3;
        padding-right: 0;
        padding-bottom: 8px;
      }
      .semester-container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <h1>MALLA INTERACTIVA IMAGENOLOGIA Y FISICA MEDICA</h1>
  <div class="year-container" id="malla"></div>

  <script>
    const malla = document.getElementById("malla");

    const Semestre = {
      "Semestre 1": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I"],
      "Semestre 2": ["Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Anatomía Humana", "Estrategias Para el Aprendizaje"],
      "Semestre 3": ["Inmunología Básica", "Fisiología Humana", "Anatomía Humana Avanzada", "Bioestadística", "Bioseguridad y procedimientos de Enfermería", "Antropología"],
      "Semestre 4": ["Orientación profesional y Bioética", "Fisiopatología Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Semestre 5": ["Radiodiagnóstico I", "Anatomía radiológica", "Radioprotección y dosimetría", "Radiofísica", "Epidemiología y Salud publica"],
      "Semestre 6": ["Radiodiagnóstico II", "Electrónica medica", "Patología radiológica", "Administración y gestión en salud"],
      "Semestre 7": ["Resonancia Magnética", "Tomografía computada", "Neuroimagenologia", "Gestión y garantías de calidad en salud"],
      "Semestre 8": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"],
      "Semestre 9": ["Internado"],
      "Semestre 10": ["Seminario de investigación", "Formulación de proyectos", "Prevención en salud"]
    };

    const semestrePorAnio = {
      "Primer Año": ["Semestre 1", "Semestre 2"],
      "Segundo Año": ["Semestre 3", "Semestre 4"],
      "Tercer Año": ["Semestre 5", "Semestre 6"],
      "Cuarto Año": ["Semestre 7", "Semestre 8"],
      "Quinto Año": ["Semestre 9", "Semestre 10"]
    };

    const colorPorAnio = {
      "Primer Año": "celeste",
      "Segundo Año": "celeste",
      "Tercer Año": "morado",
      "Cuarto Año": "morado",
      "Quinto Año": "morado"
    };

    const prerrequisitos = {
      "Introducción a la Física": ["Matemáticas"],
      "Bioquímica General": ["Biología Celular", "Química General y Orgánica"],
      "Histoembriología": ["Biología Celular"],
      "Inglés II": ["Inglés I"],
      
      "Inmunología Básica": ["Histoembriología"],
      "Fisiología Humana": ["Anatomía Humana", "Biología Celular"],
      "Anatomía Humana Avanzada": ["Anatomía Humana"],
      "Bioseguridad y procedimientos de Enfermería": ["Anatomía Humana"],
      "Bioestadística": ["Matemáticas"],

      "Fisiopatología Humana": ["Fisiología Humana"],
      "Infectología General e Infecciones Asociadas a la Atención en Salud": ["Inmunología Básica"],
      "Farmacología General": ["Fisiología Humana", "Bioquímica General"],
      
      "Radiodiagnóstico I": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I", "Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Inmunología Básica", "Fisiología Humana", "Anatomía Humana", "Bioestadística", "Anatomía Humana Avanzada", "Bioseguridad y procedimientos de Enfermería", "Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Anatomía radiológica": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I", "Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Inmunología Básica", "Fisiología Humana", "Anatomía Humana", "Bioestadística", "Anatomía Humana Avanzada", "Bioseguridad y procedimientos de Enfermería", "Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Radioprotección y dosimetría": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I", "Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Inmunología Básica", "Fisiología Humana", "Anatomía Humana", "Bioestadística", "Anatomía Humana Avanzada", "Bioseguridad y procedimientos de Enfermería", "Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Radiofísica": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I", "Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Inmunología Básica", "Fisiología Humana", "Anatomía Humana", "Bioestadística", "Anatomía Humana Avanzada", "Bioseguridad y procedimientos de Enfermería", "Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Epidemiología y Salud publica": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I", "Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Inmunología Básica", "Fisiología Humana", "Anatomía Humana", "Bioestadística", "Anatomía Humana Avanzada", "Bioseguridad y procedimientos de Enfermería", "Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", "Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      
      "Radiodiagnóstico II": ["Radiodiagnóstico I", "Radioprotección y dosimetría"],
      "Electrónica medica": ["Radiofísica"],
      "Patología radiológica": ["Anatomía radiológica"],
      "Administración y gestión en salud": ["Epidemiología y Salud publica"],
      
      "Resonancia Magnética": ["Radiodiagnóstico II", "Patología radiológica"],
      "Tomografía computada": ["Radiodiagnóstico II", "Patología radiológica"],
      "Neuroimagenologia": ["Patología radiológica"],
      "Gestión y garantías de calidad en salud": ["Administración y gestión en salud"],
      
      "Medicina nuclear": ["Radiodiagnóstico II", "Patología radiológica"],
      "Radioterapia": ["Tomografía computada"],
      "Introducción a la ecografía": ["Radiodiagnóstico II", "Patología radiológica"],
      "Análisis clínico integrado": ["Resonancia Magnética", "Tomografía computada", "Neuroimagenologia", "Gestión y garantías de calidad en salud"],
      "Bioestadística aplicada y metodología de la investigación": ["Epidemiología y Salud publica"],
      
      "Internado": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"],
      "Seminario de investigación": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación", "Formulación de proyectos"],
      "Formulación de proyectos": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación", "Seminario de investigación"],
      "Prevención en salud": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"]
    };

    const estadoCursos = JSON.parse(localStorage.getItem("estadoCursos") || "{}");

    for (const anio in semestrePorAnio) {
      const yearDiv = document.createElement("div");
      yearDiv.className = "year";
      yearDiv.dataset.color = colorPorAnio[anio] || "";

      const yearTitle = document.createElement("div");
      yearTitle.className = "year-title";
      yearTitle.textContent = anio;
      yearDiv.appendChild(yearTitle);

      const semesterContainer = document.createElement("div");
      semesterContainer.className = "semester-container";

      semestrePorAnio[anio].forEach(sem => {
        const semDiv = document.createElement("div");
        semDiv.className = "semester";

        const semTitle = document.createElement("div");
        semTitle.className = "semester-title";
        semTitle.textContent = sem;
        semDiv.appendChild(semTitle);

        Semestre[sem].forEach(curso => {
          const div = document.createElement("div");
          div.className = "course";
          div.textContent = curso;

          const requisitos = prerrequisitos[curso] || [];
          const bloqueado = requisitos.some(r => !estadoCursos[r]);

          if (estadoCursos[curso]) {
            div.classList.add("approved");
          } else if (bloqueado) {
            div.classList.add("locked");
            div.title = `Prerrequisitos: ${requisitos.filter(r => !estadoCursos[r]).join(", ")}`;
          }

          div.addEventListener("click", () => {
            if (div.classList.contains("locked")) return;
            estadoCursos[curso] = !estadoCursos[curso];
            localStorage.setItem("estadoCursos", JSON.stringify(estadoCursos));
            location.reload();
          });

          semDiv.appendChild(div);
        });

        semesterContainer.appendChild(semDiv);
      });

      yearDiv.appendChild(semesterContainer);
      malla.appendChild(yearDiv);
    }
  </script>
</body>
</html>
