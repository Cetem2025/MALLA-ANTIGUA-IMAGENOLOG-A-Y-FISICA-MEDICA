<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva Tecnología Médica</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      background: #f4f6f8;
      padding: 40px;
      color: #333;
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 40px;
      color: #2c3e50;
    }
    .year {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-start;
      margin-bottom: 50px;
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #2c3e50;
      background-color: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .year-title {
      flex-basis: 100%;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 15px;
      border-bottom: 2px solid #ccc;
      padding-bottom: 8px;
      text-transform: uppercase;
      color: #1a237e;
    }
    .semester {
      display: inline-block;
      vertical-align: top;
      padding: 15px;
      background: #fdfdfd;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      width: 260px;
    }
    .semester-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 12px;
      text-align: center;
      color: #2c3e50;
    }
    .course {
      padding: 8px 10px;
      margin: 6px 0;
      border-radius: 6px;
      cursor: pointer;
      background-color: #f8e1e7;
      transition: background-color 0.3s ease;
    }
    .course.approved {
      background-color: #a5d6a7;
      text-decoration: line-through;
    }
    .course.locked {
      background-color: #d6d6d6;
      cursor: not-allowed;
      color: #666;
    }
    .year[data-color='celeste'] {
      background-color: #e3f2fd;
    }
    .year[data-color='morado'] {
      background-color: #ede7f6;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva de Tecnología Médica</h1>
  <div id="malla"></div>

  <script>
    const malla = document.getElementById("malla");

    const Semestre = {
      "Semestre 1": ["Matemáticas", "Biología Celular", "Química General y Orgánica", "Inglés I"],
      "Semestre 2": ["Introducción a la Física", "Bioquímica General", "Histoembriología", "Inglés II", "Anatomía Humana", "Estrategias Para el Aprendizaje"],
      "Semestre 3": ["Inmunología Básica", "Fisiología Humana", "Anatomía Humana Avanzada", "Bioestadística", "Bioseguridad y procedimientos de Enfermería", "Antropología"],
      "Semestre 4": ["Orientación profesional y Bioética", "Fisiopatologia Humana", "Psicologia de la Atención al Paciente", " Infectología General e Infecciones Asociadas a la Atención en Salud", "Farmacología General"],
      "Semestre 5": ["Radiodiagnóstico I", "Anatomía radiológica", "Radioprotección y dosimetría", "Radiofísica", "Epidemiología y Salud publica"],
      "Semestre 6": ["Radiodiagnóstico II", "Electrónica medica", "Patología radiológica", "Administración y gestión en salud"],
      "Semestre 7": ["Resonancia Magnética", "Tomografía computada", "Neuroimagenologia", "Gestión y garantías de calidad en salud"],
      "Semestre 8": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"],
      "Semestre 9": ["Internado"],
      "Semestre 10": ["Seminario de investigación", "Formulación de proyectos", "Prevención en salud"]
    };

    const semestrePorAnio = {
      "Primer Año": ["Semestre 1", "Semestre 2"],
      "Segundo Año": ["Semestre 3", "Semestre 4"],
      "Tercer Año": ["Semestre 5", "Semestre 6"],
      "Cuarto Año": ["Semestre 7", "Semestre 8"],
      "Quinto Año": ["Semestre 9", "Semestre 10"]
    };

    const colorPorAnio = {
      "Primer Año": "celeste",
      "Segundo Año": "celeste",
      "Tercer Año": "morado",
      "Cuarto Año": "morado",
      "Quinto Año": "morado"
    };

    const prerrequisitos = {
       "Introducción a la Física": ["Matemáticas"],
      "Bioquímica General": ["Biología Celular", "Química General y Orgánica"],
      "Histoembriología": ["Biología Celular"],
      "Inglés II": ["Inglés I"],
      "Inmunología Básica": ["Histoembriología"],
      "Fisiología Humana": ["Anatomía Humana", "Biología Celular"],
      "Anatomía Humana Avanzada": ["Anatomía Humana"],
      "Bioseguridad y procedimientos de Enfermería": ["Anatomía Humana"],
      "Bioestadística": ["Matemáticas"],
      "Radiodiagnóstico I": ["Primer Año", "Segundo Año"],
      "Anatomía radiológica": ["Primer Año", "Segundo Año"],
      "Radioprotección y dosimetría": ["Primer Año", "Segundo Año"],
      "Radiofísica": ["Primer Año", "Segundo Año"],
      "Epidemiología y Salud publica": ["Primer Año", "Segundo Año"],
      "Radiodiagnóstico II": ["Radiodiagnóstico I", "Radioprotección y dosimetría"],
      "Electrónica medica": ["Radiofísica"],
      "Patología radiológica": ["Anatomía radiológica"],
      "Administración y gestión en salud": ["Epidemiología y Salud publica"],
      "Resonancia Magnética": ["Radiodiagnóstico II", "Patología radiológica"],
      "Tomografía computada": ["Radiodiagnóstico II", "Patología radiológica"],
      "Neuroimagenologia": ["Patología radiológica"],
      "Gestión y garantías de calidad en salud": ["Administración y gestión en salud"],
      "Medicina nuclear": ["Radiodiagnóstico II", "Patología radiológica"],
      "Radioterapia": ["Tomografía computada"],
      "Introducción a la ecografía": ["Radiodiagnóstico II", "Patología radiológica"],
      "Análisis clínico integrado": ["Resonancia Magnética", "Tomografía computada", "Neuroimagenologia", "Gestión y garantías de calidad en salud"],
      "Bioestadística aplicada y metodología de la investigación": ["Epidemiología y Salud publica"],
      "Internado": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"],
      "Seminario de investigación": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación", "Formulación de proyectos"],
      "Formulación de proyectos": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación", "Seminario de investigación"],
      "Prevención en salud": ["Medicina nuclear", "Radioterapia", "Introducción a la ecografía", "Análisis clínico integrado", "Bioestadística aplicada y metodología de la investigación"]
    };

    const estadoCursos = JSON.parse(localStorage.getItem("estadoCursos") || "{}");

    for (const anio in semestrePorAnio) {
      const yearDiv = document.createElement("div");
      yearDiv.className = "year";
      yearDiv.dataset.color = colorPorAnio[anio] || "";

      const yearTitle = document.createElement("div");
      yearTitle.className = "year-title";
      yearTitle.textContent = anio;
      yearDiv.appendChild(yearTitle);

      semestrePorAnio[anio].forEach(sem => {
        const semDiv = document.createElement("div");
        semDiv.className = "semester";

        const semTitle = document.createElement("div");
        semTitle.className = "semester-title";
        semTitle.textContent = sem;
        semDiv.appendChild(semTitle);

        Semestre[sem].forEach(curso => {
          const div = document.createElement("div");
          div.className = "course";
          div.textContent = curso;

          const requisitos = prerrequisitos[curso] || [];
          const bloqueado = requisitos.some(r => !estadoCursos[r]);

          if (estadoCursos[curso]) {
            div.classList.add("approved");
          } else if (bloqueado) {
            div.classList.add("locked");
            div.title = `Prerrequisitos: ${requisitos.filter(r => !estadoCursos[r]).join(", ")}`;
          }

          div.addEventListener("click", () => {
            if (div.classList.contains("locked")) return;
            estadoCursos[curso] = !estadoCursos[curso];
            localStorage.setItem("estadoCursos", JSON.stringify(estadoCursos));
            location.reload();
          });

          semDiv.appendChild(div);
        });

        yearDiv.appendChild(semDiv);
      });

      malla.appendChild(yearDiv);
    }
  </script>
</body>
</html>
