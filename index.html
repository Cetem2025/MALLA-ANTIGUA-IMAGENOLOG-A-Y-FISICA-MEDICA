<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Imagenología y Física Médica</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f4f8;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .container {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      gap: 20px;
    }
    .year {
      min-width: 300px;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .semester {
      margin-bottom: 20px;
    }
    .semester h3 {
      background-color: #cce5ff;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    .subject {
      background-color: #e9ecef;
      margin: 8px 0;
      padding: 8px;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
    }
    .subject.locked {
      background-color: #d6d8db;
      cursor: not-allowed;
    }
    .subject::after {
      content: attr(data-tooltip);
      visibility: hidden;
      opacity: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 6px;
      border-radius: 6px;
      position: absolute;
      z-index: 1;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.2s;
      white-space: nowrap;
      font-size: 12px;
    }
    .subject.locked:hover::after {
      visibility: visible;
      opacity: 1;
    }
    .subject.completed {
      text-decoration: line-through;
      background-color: #b2f0b2;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular: Imagenología y Física Médica (Antigua)</h1>
  <div class="container" id="malla"></div>

  <script>
    const malla = {
      'PRIMER AÑO': {
        'PRIMER SEMESTRE': [
          { nombre: 'Matemáticas' },
          { nombre: 'Biología Celular' },
          { nombre: 'Química general y Orgánica' },
          { nombre: 'Inglés I' }
        ],
        'SEGUNDO SEMESTRE': [
          { nombre: 'Introducción a la física', prereq: ['Matemáticas'] },
          { nombre: 'Bioquímica General', prereq: ['Biología Celular', 'Química general y Orgánica'] },
          { nombre: 'Histoembriología', prereq: ['Biología Celular'] },
          { nombre: 'Anatomía Humana' },
          { nombre: 'Inglés II', prereq: ['Inglés I'] },
          { nombre: 'Estrategias para el aprendizaje' }
        ]
      },
      'SEGUNDO AÑO': {
        'TERCER SEMESTRE': [
          { nombre: 'Inmunología Básica', prereq: ['Histoembriología'] },
          { nombre: 'Fisiología Humana', prereq: ['Anatomía Humana', 'Biología Celular'] },
          { nombre: 'Anatomía Humana Avanzada', prereq: ['Anatomía Humana'] },
          { nombre: 'Bioseguridad y procedimientos de Enfermería', prereq: ['Anatomía Humana'] },
          { nombre: 'Bioestadística', prereq: ['Matemáticas'] },
          { nombre: 'Antropología' }
        ],
        'CUARTO SEMESTRE': [
          { nombre: 'Orientación profesional y bioética' },
          { nombre: 'Fisiopatología Humana', prereq: ['Fisiología Humana'] },
          { nombre: 'Psicología de la atención al paciente' },
          { nombre: 'Infectología General e Infecciones asociadas a la atención en Salud', prereq: ['Inmunología Básica'] },
          { nombre: 'Farmacología General', prereq: ['Fisiología Humana', 'Bioquímica General'] },
          { nombre: 'Ética' }
        ]
      },
      'TERCER AÑO': {
        'QUINTO SEMESTRE': [
          { nombre: 'Radiodiagnóstico I', prereq: ['PRIMER AÑO', 'SEGUNDO AÑO'] },
          { nombre: 'Anatomía radiológica', prereq: ['PRIMER AÑO', 'SEGUNDO AÑO'] },
          { nombre: 'Radioprotección y dosimetría', prereq: ['PRIMER AÑO', 'SEGUNDO AÑO'] },
          { nombre: 'Radiofísica', prereq: ['PRIMER AÑO', 'SEGUNDO AÑO'] },
          { nombre: 'Epidemiología y Salud pública', prereq: ['PRIMER AÑO', 'SEGUNDO AÑO'] }
        ],
        'SEXTO SEMESTRE': [
          { nombre: 'Radiodiagnóstico II', prereq: ['Radiodiagnóstico I', 'Radioprotección y dosimetría'] },
          { nombre: 'Electrónica médica', prereq: ['Radiofísica'] },
          { nombre: 'Patología radiológica', prereq: ['Anatomía radiológica'] },
          { nombre: 'Administración y gestión en salud', prereq: ['Epidemiología y Salud pública'] }
        ]
      },
      'CUARTO AÑO': {
        'SEPTIMO SEMESTRE': [
          { nombre: 'Resonancia Magnética', prereq: ['Radiodiagnóstico II', 'Patología radiológica'] },
          { nombre: 'Tomografía computada', prereq: ['Radiodiagnóstico II', 'Patología radiológica'] },
          { nombre: 'Neuroimagenologia', prereq: ['Patología radiológica'] },
          { nombre: 'Gestión y garantías de calidad en salud', prereq: ['Administración y gestión en salud'] }
        ],
        'OCTAVO SEMESTRE': [
          { nombre: 'Medicina nuclear', prereq: ['Radiodiagnóstico II', 'Patología radiológica'] },
          { nombre: 'Radioterapia', prereq: ['Tomografía computada'] },
          { nombre: 'Introducción a la ecografía', prereq: ['Radiodiagnóstico II', 'Patología radiológica'] },
          { nombre: 'Análisis clínico integrado', prereq: ['SEPTIMO SEMESTRE'] },
          { nombre: 'Bioestadística aplicada y metodología de la investigación', prereq: ['Epidemiología y Salud pública'] }
        ]
      },
      'QUINTO AÑO': {
        'NOVENO SEMESTRE': [
          { nombre: 'Internado', prereq: ['OCTAVO SEMESTRE'] }
        ],
        'DECIMO SEMESTRE': [
          { nombre: 'Seminario de investigación', prereq: ['OCTAVO SEMESTRE', 'Formulación de proyectos'] },
          { nombre: 'Formulación de proyectos', prereq: ['OCTAVO SEMESTRE', 'Seminario de investigación'] },
          { nombre: 'Prevención en salud', prereq: ['OCTAVO SEMESTRE'] }
        ]
      }
    };

    const estado = JSON.parse(localStorage.getItem('progresoMalla')) || {};

    function renderMalla() {
      const cont = document.getElementById('malla');
      cont.innerHTML = '';
      for (const [año, semestres] of Object.entries(malla)) {
        const añoDiv = document.createElement('div');
        añoDiv.className = 'year';
        const titulo = document.createElement('h2');
        titulo.textContent = año;
        añoDiv.appendChild(titulo);

        for (const [semestre, ramos] of Object.entries(semestres)) {
          const semDiv = document.createElement('div');
          semDiv.className = 'semester';
          const semTitulo = document.createElement('h3');
          semTitulo.textContent = semestre;
          semDiv.appendChild(semTitulo);

          ramos.forEach(m => {
            const el = document.createElement('div');
            el.className = 'subject';
            el.textContent = m.nombre;
            if (estado[m.nombre]) el.classList.add('completed');

            const cumplido = !m.prereq || m.prereq.every(pr => estado[pr] || Object.keys(estado).some(k => k.includes(pr) && estado[k]));
            if (!cumplido) {
              el.classList.add('locked');
              el.setAttribute('data-tooltip', 'Requiere: ' + m.prereq.join(', '));
            } else {
              el.addEventListener('click', () => {
                estado[m.nombre] = !estado[m.nombre];
                localStorage.setItem('progresoMalla', JSON.stringify(estado));
                renderMalla();
              });
            }
            semDiv.appendChild(el);
          });
          añoDiv.appendChild(semDiv);
        }
        cont.appendChild(añoDiv);
      }
    }

    renderMalla();
  </script>
</body>
</html>
