<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Imagenología y Física Médica</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f4f8;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    .container {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      gap: 20px;
    }
    .year {
      min-width: 300px;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .semester {
      margin-bottom: 20px;
    }
    .semester h3 {
      background-color: #cce5ff;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
    }
    .subject {
      background-color: #e9ecef;
      margin: 8px 0;
      padding: 8px;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
    }
    .subject.locked {
      background-color: #d6d8db;
      cursor: not-allowed;
    }
    .subject::after {
      content: attr(data-tooltip);
      visibility: hidden;
      opacity: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 6px;
      border-radius: 6px;
      position: absolute;
      z-index: 1;
      top: -35px;
      left: 50%;
      transform: translateX(-50%);
      transition: opacity 0.2s;
      white-space: nowrap;
      font-size: 12px;
    }
    .subject.locked:hover::after {
      visibility: visible;
      opacity: 1;
    }
    .subject.completed {
      text-decoration: line-through;
      background-color: #b2f0b2;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular: Imagenología y Física Médica (Antigua)</h1>
  <div class="container" id="malla"></div>

  <script>
    const subjectsData = {
      'Matemáticas': {},
      'Biología Celular': {},
      'Química general y Orgánica': {},
      'Inglés I': {},
      'Introducción a la física': { prereq: ['Matemáticas'] },
      'Bioquímica General': { prereq: ['Biología Celular'] },
      'Histoembriología': {},
      'Anatomía Humana': {},
      'Inglés II': { prereq: ['Inglés I'] },
      'Estrategias para el aprendizaje': {},
      'Inmunología Básica': { prereq: ['Bioquímica General'] },
      'Fisiología Humana': { prereq: ['Bioquímica General'] },
      'Anatomía Humana Avanzada': { prereq: ['Anatomía Humana'] },
      'Bioseguridad y procedimientos de Enfermería': {},
      'Bioestadística': {},
      'Antropología': {},
      'Orientación profesional y bioética': {},
      'Fisiopatología Humana': { prereq: ['Fisiología Humana'] },
      'Psicología de la atención al paciente': {},
      'Infectología General e Infecciones asociadas a la atención en Salud': {},
      'Farmacología General': {},
      'Ética': {},
      'Radiodiagnóstico I': { prereq: ['Introducción a la física'] },
      'Anatomía radiológica': { prereq: ['Anatomía Humana Avanzada'] },
      'Radioprotección y dosimetría': {},
      'Radiofísica': {},
      'Epidemiología y Salud pública': {},
      'Radiodiagnóstico II': { prereq: ['Radiodiagnóstico I'] },
      'Electrónica médica': {},
      'Patología radiológica': {},
      'Administración y gestión en salud': {},
      'Resonancia Magnética': { prereq: ['Radiodiagnóstico II'] },
      'Tomografía computada': {},
      'Neuroimagenologia': {},
      'Gestión y garantías de calidad en salud': {},
      'Medicina nuclear': {},
      'Radioterapia': {},
      'Introducción a la ecografía': {},
      'Análisis clínico integrado': {},
      'Bioestadística aplicada y metodología de la investigación': {},
      'Internado': {},
      'Seminario de investigación': {},
      'Formulación de proyectos': {},
      'Prevención en salud': {}
    };

    const malla = {
      'PRIMER AÑO': {
        '1° Semestre': ['Matemáticas', 'Biología Celular', 'Química general y Orgánica', 'Inglés I'],
        '2° Semestre': ['Introducción a la física', 'Bioquímica General', 'Histoembriología', 'Anatomía Humana', 'Inglés II', 'Estrategias para el aprendizaje']
      },
      'SEGUNDO AÑO': {
        '3° Semestre': ['Inmunología Básica', 'Fisiología Humana', 'Anatomía Humana Avanzada', 'Bioseguridad y procedimientos de Enfermería', 'Bioestadística', 'Antropología'],
        '4° Semestre': ['Orientación profesional y bioética', 'Fisiopatología Humana', 'Psicología de la atención al paciente', 'Infectología General e Infecciones asociadas a la atención en Salud', 'Farmacología General', 'Ética']
      },
      'TERCER AÑO': {
        '5° Semestre': ['Radiodiagnóstico I', 'Anatomía radiológica', 'Radioprotección y dosimetría', 'Radiofísica', 'Epidemiología y Salud pública'],
        '6° Semestre': ['Radiodiagnóstico II', 'Electrónica médica', 'Patología radiológica', 'Administración y gestión en salud']
      },
      'CUARTO AÑO': {
        '7° Semestre': ['Resonancia Magnética', 'Tomografía computada', 'Neuroimagenologia', 'Gestión y garantías de calidad en salud'],
        '8° Semestre': ['Medicina nuclear', 'Radioterapia', 'Introducción a la ecografía', 'Análisis clínico integrado', 'Bioestadística aplicada y metodología de la investigación']
      },
      'QUINTO AÑO': {
        '9° Semestre': ['Internado'],
        '10° Semestre': ['Seminario de investigación', 'Formulación de proyectos', 'Prevención en salud']
      }
    };

    let completed = JSON.parse(localStorage.getItem('completedSubjects') || '[]');

    function isUnlocked(subject) {
      const prereq = subjectsData[subject]?.prereq || [];
      return prereq.every(p => completed.includes(p));
    }

    function toggleSubject(subject) {
      if (!isUnlocked(subject)) return;
      const idx = completed.indexOf(subject);
      if (idx >= 0) completed.splice(idx, 1);
      else completed.push(subject);
      localStorage.setItem('completedSubjects', JSON.stringify(completed));
      renderMalla();
    }

    function renderMalla() {
      const cont = document.getElementById('malla');
      cont.innerHTML = '';

      for (const [año, semestres] of Object.entries(malla)) {
        const col = document.createElement('div');
        col.className = 'year';

        const title = document.createElement('h2');
        title.textContent = año;
        col.appendChild(title);

        for (const [sem, ramos] of Object.entries(semestres)) {
          const semDiv = document.createElement('div');
          semDiv.className = 'semester';
          const semTitle = document.createElement('h3');
          semTitle.textContent = sem;
          semDiv.appendChild(semTitle);

          ramos.forEach(ramo => {
            const unlocked = isUnlocked(ramo);
            const ramoDiv = document.createElement('div');
            ramoDiv.className = 'subject';
            if (!unlocked) ramoDiv.classList.add('locked');
            if (completed.includes(ramo)) ramoDiv.classList.add('completed');
            ramoDiv.textContent = ramo;
            ramoDiv.onclick = () => toggleSubject(ramo);
            if (!unlocked) ramoDiv.setAttribute('data-tooltip', `Prerrequisitos: ${subjectsData[ramo]?.prereq?.join(', ')}`);
            semDiv.appendChild(ramoDiv);
          });

          col.appendChild(semDiv);
        }

        cont.appendChild(col);
      }
    }

    renderMalla();
  </script>
</body>
</html>
